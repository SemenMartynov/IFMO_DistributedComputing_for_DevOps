---
- name: Home work 2
  hosts: carrier

  tasks:
    - name: Display Configuration Variables
      debug:
        msg:
          - "wordpress: {{ is_wordpress }}"
          - "strapi_port: {{ strapi_outside_port }}"
          - "strapi_db_name: {{ pg_database }}"
          - "db_master: {{ pg_master_container_name }}"
          - "db_replica: {{ pg_replica_container_name }}"
          - "db_pass: {{ pg_postgres_password }}"

  roles:
    - pg_replica

  post_tasks:
    - name: Test replication
      include_tasks: test.yml

    - name: Status
      debug:
        msg: "Replica added. PostgreSQL cluster now has master and slave running."
