---
- name: Деплой Wordpress и  Mysql в Docker
  hosts: webserver
  become: true
  vars_files:
    - vars.yml
  tasks:
    - name: Создать директорию проекта
      file:
        path: wordpress/
        state: directory

    - name: Скопировать docker-compose.yml на сервер
      template:
        src: docker-compose.yml.j2
        dest: wordpress/docker-compose.yml
    
    - name: Скопировать master_init.sql
      copy:
        src: master_init.sql
        dest: wordpress/master_init.sql

    - name: Запустить Wordpress и Mysql
      command: docker-compose up -d
      args:
        chdir: wordpress/