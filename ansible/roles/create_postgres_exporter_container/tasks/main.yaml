- name: Pull PostgreSQL exporter image
  community.docker.docker_image:
    name: "prometheuscommunity/postgres-exporter"
    source: pull

- name: Run postgres_exporter container
  community.docker.docker_container:
    name: "node1-postgresql-exporter"
    image: "prometheuscommunity/postgres-exporter"
    state: started
    restart_policy: always
    ports:
      - "9187:9187"
    env:
      DATA_SOURCE_NAME: "postgresql://postgres_exporter:postgres_exporter@localhost:5432/postgres?sslmode=disable"
