# IFMO_DistributedComputing_for_DevOps
Distributed Computing course for DevOps 2025

# Лабораторная работа №4

Требования:
-----------
* выполнить [лабораторную работу №2](/LAB03.md)

Как запустить:
--------------
* ```ansible-playbook --inventory carrier, playbook4.yml```

Переносит данные из репликантов MASTER -> SLAVE в кластер Galera из 5 узлов:
--------------
* останавливает контейнер **Wordpress**
* делает бекап БД с MASTER
* останавливает контейнеры: MASTER и SLAVE
* создаёт Galera-кластер:
  * создаёт один узел
  * запускает его в режиме bootstrap
  * после инициирования кластера, перезапускает узел в обычном режиме
  * востанавливает бекап БД
  * добавляет пользователей для:
    * мониторинга **Prometheus**
    * проверок **HAProxy**
  * добавляет к кластеру ещё четыре узла
* добавляет один контейнер **HAProxy** и запускает с подготовленным конфигом
* перезапускает контейнер **Prometheus** с изменённым конфигом для мониторинга кластера
* перезапускает контейнер **Wordpress** - в качестве узла для подключения к DB указан **HAProxy**

Тестирование:
------------
для автоматизации развёртывания и тестирования работы playbook'а использется [GitHub Actions](https://github.com/features/actions).
