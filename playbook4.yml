---
- name: Home work 4
  hosts: carrier
  tasks:
    - name: Display Configuration Variables
      ansible.builtin.debug:
        msg:
          - "wordpress: {{ is_wordpress }}" # True or False
          - "wordpress_port: {{ wordpress_port }}" # 80 or 8080 or whatewer
          - "wordpress_db_name: {{ wordpress_db_name }}" # WP database name
          - "db1_host: {{ db1_host }}" # container name
          - "db2_host: {{ db2_host }}" # container name
          - "db3_host: {{ db3_host }}" # container name
          - "db4_host: {{ db4_host }}" # container name
          - "db5_host: {{ db5_host }}" # container name
          - "db_pass: {{ db_pass }}" # root password for DBs
          - "loadbalancer: {{ loadbalancer }}" # container name
          - "monitoring_url: {{ monitoring_url }}" # monitoring url including port
    - name: Backup current WP databases just for sake of safety
      community.mysql.mysql_db:
        state: dump
        name: all
        target: '{{ wp_mysql_dump }}'
        login_host: 10.16.1.3
        login_port: 3306
        login_password: '{{ mysql_root_pw }}'
